package sit.wire;

import java.awt.AWTException;

// Characters 변수 

// Operations 기능

// 
// precondition:
// postcondition:
// return:

import java.io.IOException;

import data.LogData;
import data.ManagingStatus;
import file.LogFile;
import firebase.FirebaseUpload;
import screenShots.ScreenDetection;
import timeFunctions.CurrentTime;
import timeFunctions.TimeSleep;


public class Main {
	
	

    public static void main(String[] args) throws IOException, AWTException {
    	
    	System.out.println("--------------와이어 알림 프로그램 시작----------------");
    	
    	while (true) {
    		CurrentTime.setTime(); // 현재 시간 설정
    		String[] addedLines = LogFile.addedLines();  // 추가된 로그
    		   		
    		if (addedLines != null) {
    			Loop1 : for (String line : addedLines) {  // 추가된 로그 탐색
    				if (line.contains("Nc File:")) { FirebaseUpload.fileInfoUpload(line); }
    				else if (line.contains("Reset")) { FirebaseUpload.fileInfoUpload(line); }
    				else if (line.contains("Z:")) {  }
    				
    				for (String logKey : LogData.getLogKeyList()) {  // 추가된 로그에 특정 key포함되어있는지 확인
    					if (line.contains(logKey)) { 
    						FirebaseUpload.logUpload(logKey);
    						break Loop1;
    					} 
    				}
    			}
    		}
    		if (!ManagingStatus.getProcessingStatus() && ScreenDetection.Restart()) {
    			FirebaseUpload.logUpload("가공감지");
    		}
        	TimeSleep.sleep(1);  // 시간 지연
    	}
    }
}