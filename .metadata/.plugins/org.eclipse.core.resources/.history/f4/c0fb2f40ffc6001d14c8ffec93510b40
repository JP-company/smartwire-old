package sit.wire;

import java.awt.AWTException;

// Characters 변수 

// Operations 기능

// 
// precondition:
// postcondition:
// return:

import java.io.IOException;

import data.LogData;
import data.ManagingStatus;
import file.LogFile;
import file.NcFile;
import firebase.FirebaseUpload;
import screenShots.ScreenDetection;
import timeFunctions.CurrentTime;
import timeFunctions.TimeSleep;


public class Main {
	
	

    public static void main(String[] args) throws IOException, AWTException {
    	
    	while (true) {
    		CurrentTime.setTime(); // 현재 시간 설정
    		String[] addedLines = LogFile.addedLines();  // 추가된 로그
    		boolean logcheck = true;
    		   		
    		if (addedLines != null) {
    			for (String line : addedLines) {  // 추가된 로그 탐색
    				for (String logKey : LogData.getLogKeyList()) {  // 추가된 로그에 특정 key포함되어있는지 확인
    					if (line.contains("Nc File:")) { NcFile.setNcFile(line); }
    					if (logcheck && line.contains(logKey)) { 
    						FirebaseUpload.logUpload(logKey);
    						logcheck = false;
    					}
    					
    				}
    				
    			}
    		}
    		
    		if (!ManagingStatus.getProcessingStatus() && ScreenDetection.Restart()) {
    			FirebaseUpload.logUpload("가공감지");
    		}
    		
        	TimeSleep.sleep(1);  // 시간 지연
    	}
    }

	
    
}